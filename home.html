<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Project Management System</title>
    <link rel="stylesheet" href="assets/css/home.css">
</head>
<body>
    <nav class="top-nav">
        <button class="menu-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#42526E">
                <path d="M4 5h16v2H4zm0 6h16v2H4zm0 6h16v2H4z"/>
            </svg>
        </button>
        
        <div class="logo">
            <svg width="30" height="30" viewBox="0 0 30 30" fill="#2684FF">
                <path d="M15 0C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15zm0 5c5.514 0 10 4.486 10 10s-4.486 10-10 10S5 20.514 5 15 9.486 5 15 5z"/>
            </svg>
            <span style="font-size: 20px; font-weight: 500; color: #42526E;">Project Management</span>
        </div>

        <div class="nav-items">
            <a href="#" class="nav-item">Your work</a>
            <div class="dropdown">
                <a href="#" class="nav-item" id="projectsLink">Projects</a>
                <div class="dropdown-content" id="projectsDropdown">
                    <a href="createProject.html">Create Project</a>
                    <a href="projects.html">View Projects</a>
                    
                </div>
            </div>
            
            <div class="dropdown">
                <a href="task.html" class="nav-item">Tasks</a>
                <div class="dropdown-content" id="tasksDropdown">
                    <a href="projects.html">view projects</a>
                </div>
            </div>
            <a href="projectChat.html" class="nav-item">Chat</a>
        </div>

        <button class="create-button" id="createProjectBtn">Create</button>
        <div class="nav-right">
            <div class="user-profile">
                <div id="userAvatar" class="avatar">
                    <span>U</span>
                </div>
                <div id="profileMenu" class="profile-menu">
                    <div class="profile-header">
                        <div class="profile-info">
                            <span id="userName">User</span>
                            <span id="userEmail"></span>
                        </div>
                    </div>
                    <div class="profile-links">
                        <a href="profileSettings.html" class="profile-link">Profile settings</a>
                        <a href="includes/logout.php" class="profile-link logout">Log out</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="welcome-message">
        <h1>Welcome to Project Management App</h1>
        <p>Your central hub for team collaboration and project tracking</p>
    </div>

    <div class="for-you-section">
        <h2>For you</h2>
        
        <div class="recent-projects">
            <div class="section-header">
                <h3>Recent projects</h3>
                <a href="projects.html" class="view-all">View all projects</a>
            </div>
            
            <div class="project-cards" id="projectCards">
                <!-- Projects will be loaded dynamically -->
            </div>
        </div>
    </div>

    <script src="assets/js/profile.js"></script>
    <script>
        // Function to load user's projects
        function loadUserProjects() {
            fetch('includes/get_user_projects.php')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const projectCards = document.getElementById('projectCards');
                        projectCards.innerHTML = ''; // Clear existing cards
                        
                        data.projects.forEach(project => {
                            const projectHtml = `
                                <div class="project-card">
                                    <div class="project-icon ${getRandomProjectClass()}">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#42526E">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                                        </svg>
                                    </div>
                                    <div class="project-info">
                                        <div class="project-header">
                                            <h4>${project.name}</h4>
                                            <span class="project-type">Team-managed software</span>
                                        </div>
                                        <div class="quick-links">
                                            <h5>Quick links</h5>
                                            <a href="#" class="work-items">My open work items <span class="count">0</span></a>
                                            <a href="#" class="done-items">Done work items</a>
                                        </div>
                                        <div class="board-info">
                                            <span>1 board</span>
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="#42526E">
                                                <path d="M7 10l5 5 5-5H7z"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            `;
                            projectCards.innerHTML += projectHtml;
                        });

                        // If no projects, show a message
                        if (data.projects.length === 0) {
                            projectCards.innerHTML = '<p>No projects created yet. Click "Create Project" to get started!</p>';
                        }
                    } else {
                        console.error('Error loading projects:', data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                });
        }

        // Function to get random project class for icon background
        function getRandomProjectClass() {
            const classes = ['beta', 'alpha', 'scrum'];
            return classes[Math.floor(Math.random() * classes.length)];
        }

        // Load projects when page loads
        document.addEventListener('DOMContentLoaded', loadUserProjects);

        // Redirect Create button to createProject.html
        document.getElementById('createProjectBtn').addEventListener('click', function() {
            window.location.href = 'createProject.html';
        });
    </script>
</body>
</html> 